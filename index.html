<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Scheduler - College Timetable</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;600;700&display=swap" rel="stylesheet">
<!-- LINK TO EXTERNAL CSS -->
<link href="styles.css" rel="stylesheet"> 
</head>
<body>

<div id="loginPanel" class="panel active">
    <div class="header"><h2>ğŸ“ Smart TimeTable Scheduler - Login</h2><p>Select your role to continue</p></div>
    <div class="d-flex justify-content-center gap-4">
        <button class="btn btn-custom" onclick="showPanel('hodPanel')">ğŸ‘¨â€ğŸ« HOD Login</button>
        <button class="btn btn-custom" onclick="showPanel('adminPanel')">ğŸ§‘â€ğŸ’¼ Admin Login</button>
    </div>
</div>

<div id="hodPanel" class="panel">
    <button class="back-btn" onclick="showPanel('loginPanel', true)">â¬… Back</button>
    <div class="header"><h2>ğŸ‘¨â€ğŸ« HOD Dashboard</h2></div>

    <div class="d-flex justify-content-between mb-4 text-center">
        <div id="step-1-indicator" class="flex-grow-1 p-2 border-bottom border-3 border-light opacity-100">1. Course</div>
        <div id="step-2-indicator" class="flex-grow-1 p-2 border-bottom border-3 border-secondary opacity-50">2. Subjects</div>
        <div id="step-3-indicator" class="flex-grow-1 p-2 border-bottom border-3 border-secondary opacity-50">3. Teachers</div>
    </div>

    <div id="courseSection" class="section active-section card">
        <h5>Step 1: Course Information</h5>
        <div class="mb-2">
            <input type="text" id="courseName" class="form-control" placeholder="Course Name (e.g. B.Tech)">
            <div class="invalid-feedback">Please enter the course name.</div>
        </div>
        <div class="mb-2">
            <input type="text" id="branchName" class="form-control" placeholder="Branch (e.g. AI & DS)">
            <div class="invalid-feedback">Please enter the branch name.</div>
        </div>
        <div class="mb-2">
            <input type="text" id="semester" class="form-control" placeholder="Semester (e.g. 5)">
            <div class="invalid-feedback">Please enter the semester number.</div>
        </div>
        <!-- Section Names Input -->
        <div class="mb-3">
            <input type="text" id="sectionNames" class="form-control" placeholder="Section Names (e.g., A, B, C, D) - Comma Separated">
            <div class="invalid-feedback">Please enter section names (comma separated).</div>
        </div>
        <button class="btn-custom" onclick="nextStep(1)">Next â¡</button>
    </div>

    <div id="subjectSection" class="section card">
        <h5>Step 2: Add Subjects</h5>
        <div class="row">
            <div class="col-12 col-md-3 mb-2">
                <input type="text" id="subjectName" class="form-control" placeholder="Subject Name">
                <div class="invalid-feedback">Subject Name is required.</div>
            </div>
            <div class="col-12 col-md-3 mb-2">
                <input type="text" id="subjectCode" class="form-control" placeholder="Subject Code (e.g., TCS 502, PCS 502)">
                <div class="invalid-feedback">Subject Code is required.</div>
            </div>
            <div class="col-12 col-md-3 mb-2">
                <select id="subjectType" class="form-select">
                    <option value="">Select Type</option>
                    <option value="Theory">Theory</option>
                    <option value="Lab">Lab</option>
                </select>
                <div class="invalid-feedback">Subject Type is required.</div>
            </div>
            <div class="col-12 col-md-3 mb-2">
                <select id="subjectPriority" class="form-select">
                    <option value="">Select Priority</option>
                    <option value="1">1 (High)</option>
                    <option value="2">2 (Medium)</option>
                    <option value="3">3 (Low)</option>
                </select>
                <div class="invalid-feedback">Priority is required.</div>
            </div>
            <p class="text-white-50 mt-2 mb-0 small">P1: Th(3), Lab(2) | P2: Th(2), Lab(1) | P3: Th(1), Lab(1)</p>

            <div class="col-12 mt-3">
                <button class="btn-custom w-100" onclick="addSubject()">â• Add Subject</button>
            </div>
        </div>

        <h6 class="mt-3">Subjects Added:</h6>
        <ul id="subjectList"></ul>
        <button class="btn-custom" onclick="nextStep(2)">Next â¡</button>
    </div>

    <div id="teacherSection" class="section card">
        <h5>Step 3: Add Teachers</h5>
        <div class="mb-3">
            <input type="text" id="teacherName" class="form-control" placeholder="Teacher Name">
            <div class="invalid-feedback">Teacher Name is required.</div>
        </div>
        
        <fieldset class="mb-3 p-3 border rounded">
            <legend class="float-none w-auto px-2 fs-6 text-white">Select Subjects to Assign:</legend>
            <div id="subjectCheckboxes" class="d-flex flex-wrap gap-3">
                </div>
            <div id="subjectCheckboxesFeedback" class="invalid-feedback d-block" style="display:none;">Please select at least one subject.</div>
        </fieldset>
        
        <button class="btn-custom mb-3" onclick="addTeacher()">â• Add Teacher</button>

        <h6>Teachers Added:</h6>
        <ul id="teacherList"></ul>
        <button class="btn-custom" onclick="finishHOD()">ğŸ’¾ Save All</button>
    </div>
</div>

<div id="adminPanel" class="panel">
    <button class="back-btn" onclick="showPanel('loginPanel', true)">â¬… Back</button>
    <div class="header"><h2>ğŸ§‘â€ğŸ’¼ Admin Dashboard</h2></div>

    <div class="card">
        <h5>Generate Timetable</h5>
        
        <input list="adminCourseList" type="text" id="adminCourseInput" class="form-control mb-2" placeholder="Enter Course - Branch (e.g., B.Tech - AI & DS)">
        <datalist id="adminCourseList"></datalist>

        <input type="text" id="adminSemesterInput" class="form-control mb-2" placeholder="Enter Semester (e.g., 5)">
        
        <button class="btn-custom" onclick="handleGenerateTimetable()">âš™ï¸ Generate Timetable</button>
        <p id="loadingIndicator">Generating Timetable (Applying OS Scheduling)...</p>
    </div>

    <div class="card">
        <h5>Generated Timetable (All Sections)</h5>
        <p class="text-muted" id="timetableStatus">(Enter Course and Semester above and click Generate)</p>
        
        <!-- Bootstrap Tabs for Sections -->
        <ul class="nav nav-tabs" id="sectionTabs" role="tablist">
            <!-- Tabs generated dynamically -->
        </ul>
        <div class="tab-content" id="sectionTabContent">
            <!-- Tab content generated dynamically -->
        </div>

        <button class="btn-custom w-100 mt-3" onclick="downloadTimetable()">â¬‡ Download Timetable (All Sections)</button>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- LINK TO EXTERNAL JAVASCRIPT -->
<script src="backend.js"></script> 
</body>
</html>
